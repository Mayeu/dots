#!/usr/bin/env bash

# TODO:
# - add the global npm stuff
# - add the rubygem
# - add the python stuff

echo "üìù Upgrade VIM's Plugin"
vim -c 'call dein#update() | quit'
vim -c 'call dein#recache_runtimepath() | quit'

echo "üç∫ Upgrade homebrew"
brew update
brew upgrade
brew cask upgrade
brew cask reinstall gpg-suite
brew cleanup --prune 60

echo "‚¨¢  Upgrade NodeJS related stuff"
nvm upgrade

echo "üêö Upgrade the shell"
antibody update

echo "‚íº  Upgrade Google CLI"
gcloud components update

echo "üçé Upgrade the system"
sudo softwareupdate -i -a

# Make sure dvp is my login keyboard
echo "‚å®Ô∏è  Update my login keyboard"
sudo cp ~/Library/Preferences/com.apple.HIToolbox.plist /Library/Preferences/
sudo chmod 644 /Library/Preferences/com.apple.HIToolbox.plist

# Do some manual check
echo "‚ö†Ô∏è  Please close iterm, and then check if the git status thingy still works"
echo "If not, add the following to the update script:"
echo ""
echo "    sudo xcode-select -s /Applications/Xcode.app/Contents/Developer"
